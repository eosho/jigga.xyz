# CloudNativePG ScheduledBackup - daily at 2:00 AM UTC
# Uses CNPG native backups (barmanObjectStore) configured on the Cluster.
apiVersion: postgresql.cnpg.io/v1
kind: ScheduledBackup
metadata:
  name: postgres-daily-backup
  namespace: postgres
  labels:
    app.kubernetes.io/name: postgres
    app.kubernetes.io/component: backup
spec:
  schedule: "0 2 * * *"
  backupOwnerReference: cluster
  cluster:
    name: postgres-cluster
  method: barmanObjectStore
  target: prefer-standby
